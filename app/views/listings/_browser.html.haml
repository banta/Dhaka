%p.explanation You may have noticed we are missing the few pages of listings we had. Large amounts of traffic have forced us to upgrade our databases, and in the process we have lost the data from the past few weeks, so unfortunately we must ask that you #{link_to "re-register", new_registration_path(User)} and re-list your listings. We apologize for the inconvenience.
- if listings.empty?
  %h2.sorry No listings found
- else
  %table#listings-browser
    %thead.container
      - if @action == 'listings#index'
        %tr.config
          %td.mode
            %span.field
              %span.label= label_tag :meta_mode, 'View'
              %span.input= select_tag :meta_mode, options_for_select( Listing::MODE_OPTIONS, params[:mode]), {:tabindex => autotab}
          %td.order(colspan=4)
            %span.field
              %span.label= label_tag :meta_order, 'Sort by'
              %span.input= select_tag :meta_order, options_for_select( Listing::ORDER_OPTIONS, params[:order] ), {:tabindex => autotab}
      %tr.row
        - unless @compact_mode
          %td.starred.onecol Star
          %td.image.twocol Image
          %td.description_and_details.fivecol Details
          %td.created_at.twocol Posted
          %td.price.twocol.last Price
        - else
          %td.starred.onecol Star
          %td.description_and_details.sixcol Details
          %td.created_at.threecol Posted
          %td.price.twocol.last Price
    %tbody.container
      - listings.each do |listing|
        - unless @compact_mode
          = render 'listings/row', :listing => listing
        - else
          = render 'listings/row_compact', :listing => listing
  = paginate listings