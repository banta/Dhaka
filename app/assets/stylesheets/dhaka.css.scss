@import 'compass/reset';
@import 'shared';


#sidebar, .left, .center { @include layout-left; }

#main, .right { @include layout-right; }

.clear { @include layout-clear; }

.serif { @include serif; }

.sans-serif, body { @include sans-serif; }

h1 { font-size: 2em; }
h2 { font-size: 1.75em; }
h3 { font-size: 1.5em; }
h4 { font-size: 1.25em; }
h5 { font-size: 1em; }
h6 { font-size: 0.75em; }

h1, h2, h3, h4, h5, h6 { line-height: 1.25em; }

i, em { font-style: italic; }

b, strong { font-weight: bold; }

nav ul, footer ul { list-style-type : none; }

a {
  color: $blue;
  text-decoration: none;
  &:visited { color: $purple; }
  &:hover { color: $green; }
  &:active { color: $red; }
  &:hover, &:active { text-decoration: underline; }
}


html {
  font-size: 12px;
  line-height: 18px;
  margin-top: 2px;
}

body {
  font-size: 1.2em;
  line-height: 1.5em;
  font-weight: normal;

  > header, #content, > footer {
    max-width: $page-width;
    margin: 0 auto;
  }
}


#splash {
  text-align: justify;
  max-width: 470px;
  padding: 1em;

  h1, h2 {
    text-align: center;
    line-height: 1.5em;
  }

  h1 {
    font-size: 1.75em;
    @include kreon;
  }

  h2 {
    padding-bottom: 0.5em;
  }

  p {
    clear: both;
    padding: 0.5em 0;
  }
}


#flashes {
  width: 100%;
  text-align: center;
  @include layout-clear;

  p {
    font-weight: bold;
    font-size: 0.95em;
    line-height: 2.25em;
    margin-bottom: 1em;
  }

  .error { color: white; background-color: lighten($red, 10%); }
  .notice { color: black; background-color: $yellow; }
}


#site-toolbar, #user-toolbar {
  max-width: $page-width;
  list-style-type: none;
  margin: 0 auto -1.5em;

  li, li a {
    line-height: 1.5em;
    display: inline-block;
  }
}

#site-toolbar a {
  padding-left: 24px;
  background: image-url('star.png') left top no-repeat;
  &:hover  { background-position: 0 -20px; }
  &:active { background-position: 0 -40px; }
}

#user-toolbar {
  text-align: right;
  li + li { margin-left: 0.5em; }
}

@media all and (max-width: 480px) {
  #uvTab, #user-toolbar .show { display: none !important; }
}


#marketplace {
  margin-top: 0.75em;
  max-width: $page-width;

  #search_categories { @include layout-left; }
  #search_keywords { @include layout-left; }

  .actions {
    @include layout-right;
    .submit { @include layout-left; }
    .manage { @include layout-right; }
  }

  > h1, #search_listings {
    font-size: $header-size;
    line-height: $header-height;
    letter-spacing: -0.05em;
  }

  > h1 {
    @include layout-left;
    @include kreon;
    @include text-shadow(rgba(#000, 0.07) 0 0 0.15em);

    color: black;
    font-weight: bold;
    text-align: center;
    width: 100%;

    a {
      color: black !important;
      text-decoration: none !important;
      @include transition-preset-link;
      &:hover { color: $green !important; }
    }
  }
}


#top {
  @include layout-clear;
  text-align: center;
  margin-bottom: 0.25em;

  h1, h2 {
    @include kreon;
  }
}


#content {
  clear: both;
  text-align: left;

  .field, .subfield {
    display: block;
    padding: 0.25em 0;
  }

  h1, h2, h3 {
    font-size: 1.5em;
    line-height: 1.5em;
    font-weight: bold;
  }

  h2 { font-size: 1.25em; }
  h3 { font-size: 1em; }
}

#main ol, #main ul {
  list-style: disc outside none;
  ol, ul, li { margin-left: 1.5em; }
}

#sidebar, #main {
  margin: 0.75em 0;

  .actions, .devise-links, .categories {
    list-style: none !important;
    ol, ul, li { margin-left: 0 !important; }
  }
}

#sidebar {
  @media all and (min-width: 768px) {
    width: $sidebar-width;
  }

  .category, .page, > .actions {
    background-color: $yellow;

    a {
      display:block;
      padding: 0.1em 0.7em;
      &:first-child { padding-top: 0.2em; }
      &:last-child { padding-bottom: 0.2em; }

      &:hover { background-color: darken($yellow, 20%); }
    }

    &.selected a {
      font-weight: bold;
      color: white !important;
      text-decoration: none;
      cursor: default;
      background-color: lighten($blue, 20%);
    }
  }

  a {
    &:visited { color: $blue; }
    &:hover { color: $red; }
    &:active { color: $green; }
  }
}

#main {
  @media all and (min-width: 768px) {
    width: 100% - $sidebar-width - $gutter;
    padding-left: $gutter;
  }


  .listing .price {
    font-weight: bold;
    color: lighten($green, 10%);
  }
}


#listing_search {
  @include layout-clear;
  display: inline-block;
  margin: 0 auto;
  font-size: 1em;
  > div:first-child { @include layout-clear; }
}

.index, .show, .edit, .new, .create, .dashboard, #passwords, #registrations, #sessions {
  #listing_search {
    background-color: #f6f6f6;
    padding: 0.5em 0;
  }

  #search_order, #search_categories, #search_keywords, #listing_search .actions {
    @include layout-left;
    label { display: none; }
    select { width: 100%; }
    input { width: 100%; }
  }

  #search_order,
  #search_keywords,
  #search_categories { margin: 0 2%; }
  #search_keywords { width: 95%; }
  #listing_search .actions {
    text-align: center;
    .submit { width: 25%; margin: 0 auto; }
    li { @include layout-left; }
  }

  @media all and (min-width: 768px) {
    #search_order, #search_keywords, #search_categories { margin: 0; }
    #search_order      { width: 15%; padding-left: 1%; padding-right: 0.5%; }
    #search_keywords   { width: 40%; padding-right: 1%; }
    #search_categories { width: 15%; padding-right: 1%; }
    #listing_search .actions {
      width: 25.5%;
      li { width: 25%; }
      .submit { margin: 0; }
      .advanced {
        width: 75%;
        text-align: right;
      }
    }
  }
}


table#listings-browser {
  width: 100%;
  max-width: 100%;

  tr {
    td:first-child { padding-left: 0.5em; }
    td:last-child { padding-right: 0.5em; }
  }

  thead {
    display: none;

    @media all and (min-width: 768px) {
      display: table-header-group;

      tr {
        background-color: white;
        border-bottom: 1px solid #ccc;

        td {
          font-size: 1em;
          line-height: 1.75em;
          font-weight: bold;
        }
      }

      tr.sticky {
        display: block;
        position: fixed;
        width: 100%;
        top: 0;
      }
    }
  }

  td.created_at, td.price { text-align: right; }

  tr.sticky {
    td {
      @include layout-left;
      width: 20%;
    }

    .starred { width: 3.1%; }

    .image { width: 15%; }

    .description_and_details { width: 50%; }

    .created_at { width: 16.75%; }

    .price { width: 13%; }
  }

  tr.listing {
    &:nth-child(odd) { background-color: #f6f6f6; }
    &.signed { background-color: lighten($blue, 50%); }

    .toggle {
      width: 100%;
      font-size: 0.95em;
      line-height: 1.25em;
      text-align: right;
    }

    .image {
      width: 15%;
      padding: 0.5em 0;
    }

    .description_and_details {
      width: 52%;
      text-align: left;
      color: #444;
      padding: 0.5em 0;
    }

    .description {
      display: inline-block;
      font-weight: bold;
      line-height: 24px;
      a         { color: black; }
      a:visited { color: $purple; }
      a:hover   { color: $green; text-decoration: underline; }
      a:active  { color: $red; }
    }

    .extras { display: none; }

    .seller { margin-top: 0.5em; }

    .created_at {
      width: 18%;
      text-align: right;
    }

    .price {
      width: 15%;
      text-align: right;
    }

    .starred a {
      background: image-url('star.png') left top no-repeat;
      height: 20px;
      width: 20px;
      margin-right: 0.5em;
      display: block;
      text-indent: 10000%;
      overflow: hidden;
    }

    .starred a.unstar { background-position: 0 -20px; }
    .starred a:hover, .starred a:active  { background-position: 0 -40px; }

    .actions {
      font-size: 1em;
      line-height: 1.5em;
      margin-top: -1.25em;
      li {
        display: inline-block;
        margin-right: 0.3em;
      }
    }
  }

  tr.expired * {
    color: #999 !important;
  }
}

@media all and (max-width: 767px) {
  table#listings-browser {
    tr {
      td:first-child { padding-left: 0; }
      td:last-child { padding-right: 0; }
    }

    tr, td {
      float: left;
      display: block;
      clear: both;
      width: 100% !important;
      max-width: 100%;
      text-align: left;
    }

    .starred a {
      text-indent: 0 !important;
      background: transparent !important;
      display: inline !important;
    }

    .image { padding: 0 !important; }
    .description_and_details > div { width: 100%; }
    .truncated-details { display: none; }
    .extras { display: block !important; }

    .toggle, .actions { display: none; }

    tr + tr {
      margin-top: 1em;
    }
  }
}


body > footer {
  @include layout-clear;
  margin-top: 1em;
  margin-bottom: 2.5em;
  text-align: center;
  padding-top: 0.5em;

  ul {
    font-size: 0.8em;
    list-style-type: none;
  }

  .left, .center, .right {
    margin: 0.5em 0;

    @media all and (min-width: 768px) {
      width: 15%;
      height: $footer-height;
      text-align: right;
    }
  }

  .left {
    @media all and (min-width: 768px) {
      width: 70%;
      background: image-url('wordmark.png') no-repeat;
    }
  }
}


#debug {
  margin: 2em auto;
  max-width: $page-width;
  text-align: left;
  color: white;
  background-color: $blue;
  font-family: Monaco, courier, fixed;
  pre { padding: 1em; }
}